/*!
 * Perimeter.js 0.2.1 (2013-09-16, 08:17)
 * https://github.com/e-sites/perimeter.js
 * MIT licensed
 *
 * Copyright (C) 2013 e-sites, http://e-sites.nl/
 */
(function(t,e){"use strict";function i(t,e,i){return t.addEventListener?(t.addEventListener(e,i,!1),!0):t.attachEvent?t.attachEvent("on"+e,i):!1}function n(t){return t&&t.target&&t.outline?this instanceof n?(this.options=t,this.breaches=[],this.alarm=!1,this.outline=this.formatOutline(t.outline),this.target="string"==typeof t.target?o.getElementById(t.target):t.target,this.boundary=null,this.rects=this.getClientRect(this.target),this.monitor=new this.Monitor(this),this.init(t)):new n(t):undefined}var r=t,o=e,s=o.documentElement,h=o.body,l=[];n.prototype.getScrollPos=function(){return{top:s.scrollTop||h.scrollTop,left:s.scrollLeft||h.scrollLeft}},n.prototype.getClientRect=function(t){var e,i=this.getScrollPos();if(t.getBoundingClientRect===undefined)throw Error("Perimeter.js detected that your browser does not support getBoundingClientRect");return e=t.getBoundingClientRect(),{width:e.width||t.offsetWidth,height:e.height||t.offsetHeight,top:e.top+i.top-s.clientTop,left:e.left+i.left-s.clientLeft}},n.prototype.recalculate=function(){var t,e;if(this instanceof n)this.outline=this.formatOutline(this.outline),this.options.debug&&this.boundary&&this.boundary.reflow();else for(e=l.length;e--;)t=l[e],t.rects=t.getClientRect(t.target),t.options.debug&&t.boundary&&t.boundary.reflow()},n.prototype.trigger=function(t){var e={breach:this.options.onBreach,leave:this.options.onLeave};e.hasOwnProperty(t)&&e[t]instanceof Function&&e[t].apply(this,[])},n.prototype.formatOutline=function(t){for(var e=[],i=0;4>i;)isNaN(t)?e.push(t[i]?parseInt(t[i],10):0):e.push(parseInt(t,10)),i++;return e},n.prototype.init=function(t){this.target&&(l.push(this),t.debug&&this.Boundary!==undefined&&(this.boundary=new this.Boundary(this)),i(t.monitor||o,"mousemove",this.monitor.observe),i(r,"resize",this.recalculate))},r.Perimeter=n})(window,window.document),function(t,e){"use strict";t.prototype.Monitor=function(t){var i=this;return this.event=null,this.detect=function(e){var i=t.outline,n=this.event.clientX,r=this.event.clientY,o=t.getScrollPos(),s=parseInt(t.rects.top-o.top-i[0],10),h=parseInt(t.rects.left-o.left-i[3],10);switch(e){case"breach":r>=s&&s+t.rects.height+(i[0]+i[2])>r&&n>=h&&h+t.rects.width+(i[1]+i[3])>n&&(t.breaches.push([n,r]),t.trigger("breach"),t.alarm=!0);break;case"leave":(s>r||r>s+t.rects.height+(i[0]+i[2])||h>n||n>h+t.rects.width+(i[1]+i[3]))&&(t.trigger("leave"),t.alarm=!1)}},this.observe=function(n){i.event=n||e.event,t.monitor.detect(t.alarm?"leave":"breach")},this.event}}(Perimeter,window),function(t,e){"use strict";t.prototype.Boundary=function(t){function i(e,i){var n=t.rects||t.getClientRect(e),r={};return r.width=n.width+(i[1]+i[3]),r.height=n.height+(i[0]+i[2]),r.top=n.top-i[0],r.left=n.left-i[3],r}return this.elem=null,this.create=function(){return this.elem=e.createElement("div"),this.elem.className="boundary",this.reflow(t.target,t.outline),e.body.appendChild(this.elem),this},this.reflow=function(e,n){var r,o=e||t.target;return n=t.formatOutline(n||t.outline),r=i(o,n),this.elem.style.top=r.top+"px",this.elem.style.left=r.left+"px",this.elem.style.width=r.width+"px",this.elem.style.height=r.height+"px",this},this.create()}}(Perimeter,document);